import{H as k,_ as me,z as fe,r as v,A as ce,L as _e,d as u,K as O,o as i,c as L,e as l,w as a,f as t,i as be,M as A,N as I,j as m,m as y,C as h,V as ge,k as $,x as j,l as N,D as ve,X as ye,Y as Ve,B as Ue,s as he}from"./index.4196b790.js";import{l as we}from"./classify.5e1a26e9.js";function ke(f){return k({url:"/content/ad/list",method:"get",params:f})}function E(f){return k({url:"/content/ad/"+f,method:"get"})}function Ce(f){return k({url:"/content/ad/add",method:"post",data:f})}function Te(f){return k({url:"/content/ad/edit",method:"put",data:f})}function xe(f){return k({url:"/content/ad/"+f,method:"delete"})}const Le={class:"app-container"},Ne={class:"dialog-footer"},Se=fe({name:"Advertising"}),Re=Object.assign(Se,{setup(f){const{proxy:b}=he(),{business_recommend:Q}=b.useDict("business_recommend"),q=v([]),g=v(!1),r=v(!1),S=v(!0),R=v(0),C=v(""),H=v([]),D=v([{label:"\u4E0A\u67B6",value:"0"},{label:"\u4E0B\u67B6",value:"1"}]),M=v([{label:"\u8DF3\u8F6C\u94FE\u63A5",value:1},{label:"\u7AD9\u5185\u6570\u636E",value:2}]),X=ce({form:{},queryParams:{pageNum:1,pageSize:10,title:void 0,status:void 0},rules:{title:[{required:!0,message:"\u6587\u7AE0\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u663E\u793A\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:s,form:o,rules:Y}=_e(X);function U(){S.value=!0,ke(s.value).then(d=>{q.value=d.rows,R.value=d.total,S.value=!1})}function P(){s.value.pageNum=1,U()}function G(){b.resetForm("queryRef"),s.value.pageNum=1}function T(){o.value={id:void 0,title:void 0,dataType:1,subTitle:void 0,jumpUrl:void 0,recommendList:void 0,sort:0,siteJumpUrl:void 0,imageUrl:void 0,videoUrl:"1"},b.resetForm("detailRef")}function W(d){T(),we().then(n=>{H.value=b.handleTree(n.data,"id")}),d!=null&&(o.value.parentId=d.id),g.value=!0,C.value="\u6DFB\u52A0\u5E7F\u544A"}function Z(d){b.$modal.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664").then(function(){return xe(d.id)}).then(()=>{U(),b.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function ee(){b.$refs.detailRef.validate(d=>{d&&(o.value.id!=null?Te(o.value).then(n=>{b.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),g.value=!1,U()}):Ce(o.value).then(n=>{b.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),g.value=!1,U()}))})}function le(d){T(),r.value=!1,E(d.id).then(n=>{o.value=n.data,g.value=!0,C.value="\u4FEE\u6539\u5E7F\u544A"})}function te(d){T(),E(d.id).then(n=>{o.value=n.data,g.value=!0,C.value="\u67E5\u770B\u8BE6\u60C5",r.value=!0})}function ae(){g.value=!1,T()}return U(),(d,n)=>{const w=u("el-input"),p=u("el-form-item"),B=u("el-option"),z=u("el-select"),V=u("el-button"),F=u("el-form"),c=u("el-col"),J=u("el-row"),_=u("el-table-column"),ne=u("dict-tag"),oe=u("el-table"),de=u("pagination"),ue=u("el-radio"),ie=u("el-radio-group"),re=u("el-input-number"),se=u("el-dialog"),x=O("hasPermi"),pe=O("loading");return i(),L("div",Le,[l(F,{model:t(s),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[l(p,{label:"\u5E7F\u544A\u540D\u79F0",prop:"title"},{default:a(()=>[l(w,{modelValue:t(s).title,"onUpdate:modelValue":n[0]||(n[0]=e=>t(s).title=e),placeholder:"\u8BF7\u8F93\u5165\u5E7F\u544A\u540D\u79F0",clearable:"",style:{width:"240px"},onKeyup:be(P,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(p,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[l(z,{modelValue:t(s).status,"onUpdate:modelValue":n[1]||(n[1]=e=>t(s).status=e),placeholder:"\u72B6\u6001",clearable:"",style:{width:"240px"}},{default:a(()=>[(i(!0),L(A,null,I(t(D),e=>(i(),m(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(V,{type:"primary",icon:"Search",onClick:P},{default:a(()=>[y("\u641C\u7D22")]),_:1}),l(V,{icon:"Refresh",onClick:G},{default:a(()=>[y("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),l(J,{gutter:10,class:"mb8"},{default:a(()=>[l(c,{span:1.5},{default:a(()=>[h((i(),m(V,{type:"primary",plain:"",icon:"Plus",onClick:W},{default:a(()=>[y("\u65B0\u589E")]),_:1})),[[x,["system:dept:add"]]])]),_:1},8,["span"])]),_:1}),h((i(),m(oe,{ref:"operlogRef",data:t(q)},{default:a(()=>[l(_,{type:"index",width:"50",label:"\u5E8F\u53F7",align:"center"}),l(_,{prop:"title",label:"\u5E7F\u544A\u540D\u79F0",align:"center"}),l(_,{prop:"subTitle",label:"\u526F\u6807\u9898",align:"center"}),l(_,{prop:"imageUrl",label:"ICON",align:"center"},{default:a(e=>[l(ge,{width:100,height:100,src:e.row.imageUrl,isOssId:!0},null,8,["src"])]),_:1}),l(_,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:a(e=>[l(ne,{options:t(D),value:e.row.status},null,8,["options","value"])]),_:1}),l(_,{prop:"sort",label:"\u6392\u5E8F",align:"center"}),l(_,{prop:"createBy",label:"\u7F16\u8F91\u8005"}),l(_,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime"},{default:a(e=>[$("span",null,j(d.parseTime(e.row.createTime)),1)]),_:1}),l(_,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime"},{default:a(e=>[$("span",null,j(d.parseTime(e.row.updateTime)),1)]),_:1}),l(_,{label:"\u64CD\u4F5C",align:"center",width:"300"},{default:a(e=>[h((i(),m(V,{link:"",type:"primary",icon:"View",onClick:K=>te(e.row)},{default:a(()=>[y("\u67E5\u770B")]),_:2},1032,["onClick"])),[[x,["system:dept:edit"]]]),h((i(),m(V,{link:"",type:"primary",icon:"Edit",onClick:K=>le(e.row)},{default:a(()=>[y("\u4FEE\u6539")]),_:2},1032,["onClick"])),[[x,["system:dept:edit"]]]),e.row.parentId!=0?h((i(),m(V,{key:0,link:"",type:"primary",icon:"Delete",onClick:K=>Z(e.row)},{default:a(()=>[y("\u5220\u9664")]),_:2},1032,["onClick"])),[[x,["system:dept:remove"]]]):N("",!0)]),_:1})]),_:1},8,["data"])),[[pe,t(S)]]),h(l(de,{total:t(R),page:t(s).pageNum,"onUpdate:page":n[2]||(n[2]=e=>t(s).pageNum=e),limit:t(s).pageSize,"onUpdate:limit":n[3]||(n[3]=e=>t(s).pageSize=e),onPagination:U},null,8,["total","page","limit"]),[[ve,t(R)>0]]),l(se,{title:t(C),modelValue:t(g),"onUpdate:modelValue":n[13]||(n[13]=e=>Ue(g)?g.value=e:null),width:"60%","append-to-body":""},{footer:a(()=>[$("div",Ne,[t(r)?N("",!0):(i(),m(V,{key:0,type:"primary",onClick:ee},{default:a(()=>[y("\u786E \u5B9A")]),_:1})),l(V,{onClick:ae},{default:a(()=>[y("\u53D6 \u6D88")]),_:1})])]),default:a(()=>[l(F,{ref:"detailRef",model:t(o),rules:t(Y),"label-width":"100px"},{default:a(()=>[l(J,null,{default:a(()=>[l(c,{span:12},{default:a(()=>[l(p,{label:"\u5E7F\u544A\u540D\u79F0",prop:"title"},{default:a(()=>[l(w,{modelValue:t(o).title,"onUpdate:modelValue":n[4]||(n[4]=e=>t(o).title=e),placeholder:"\u8BF7\u8F93\u5165\u5E7F\u544A\u540D\u79F0",maxlength:"50",disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(c,{span:12},{default:a(()=>[l(p,{label:"\u6570\u636E\u7C7B\u578B",prop:"dataType"},{default:a(()=>[l(ie,{modelValue:t(o).dataType,"onUpdate:modelValue":n[5]||(n[5]=e=>t(o).dataType=e),disabled:t(r)},{default:a(()=>[(i(!0),L(A,null,I(t(M),e=>(i(),m(ue,{key:e.value,label:e.value},{default:a(()=>[y(j(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(c,{span:12},{default:a(()=>[l(p,{label:"\u5E7F\u544A\u526F\u6807\u9898",prop:"subTitle"},{default:a(()=>[l(w,{modelValue:t(o).subTitle,"onUpdate:modelValue":n[6]||(n[6]=e=>t(o).subTitle=e),placeholder:"\u8BF7\u8F93\u5165\u5E7F\u544A\u526F\u6807\u9898",maxlength:"50",disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),t(o).dataType=="1"?(i(),m(c,{key:0,span:12},{default:a(()=>[l(p,{label:"\u8DF3\u8F6C\u5730\u5740",prop:"jumpUrl"},{default:a(()=>[l(w,{modelValue:t(o).jumpUrl,"onUpdate:modelValue":n[7]||(n[7]=e=>t(o).jumpUrl=e),placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u5730\u5740",maxlength:"50",disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1})):N("",!0),t(o).dataType=="2"?(i(),m(c,{key:1,span:12},{default:a(()=>[l(p,{label:"\u7AD9\u5185\u8DF3\u8F6C",prop:"siteJumpUrl"},{default:a(()=>[l(w,{modelValue:t(o).siteJumpUrl,"onUpdate:modelValue":n[8]||(n[8]=e=>t(o).siteJumpUrl=e),placeholder:"\u8BF7\u8F93\u5165\u7AD9\u5185\u8DF3\u8F6C",maxlength:"30",disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1})):N("",!0),l(c,{span:12},{default:a(()=>[l(p,{label:"\u9875\u9762\u63A8\u8350",prop:"recommendList"},{default:a(()=>[l(z,{modelValue:t(o).recommendList,"onUpdate:modelValue":n[9]||(n[9]=e=>t(o).recommendList=e),placeholder:"\u9875\u9762\u63A8\u8350",clearable:"",style:{width:"100%"},disabled:t(r),multiple:""},{default:a(()=>[(i(!0),L(A,null,I(t(Q),e=>(i(),m(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(c,{span:12},{default:a(()=>[l(p,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[l(re,{modelValue:t(o).sort,"onUpdate:modelValue":n[10]||(n[10]=e=>t(o).sort=e),"controls-position":"right",min:1,max:1e3,style:{width:"100%"},disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(c,{span:24},{default:a(()=>[l(p,{label:"\u56FE\u7247\u4E0A\u4F20",prop:"imageUrl"},{default:a(()=>[l(ye,{modelValue:t(o).imageUrl,"onUpdate:modelValue":n[11]||(n[11]=e=>t(o).imageUrl=e),limit:1,disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(c,{span:24},{default:a(()=>[l(p,{label:"\u89C6\u9891\u4E0A\u4F20",prop:"videoUrl"},{default:a(()=>[l(Ve,{modelValue:t(o).videoUrl,"onUpdate:modelValue":n[12]||(n[12]=e=>t(o).videoUrl=e),fileType:["mp4","webm"],fileSize:1024,limit:1,style:{width:"50%"},disabled:t(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),$e=me(Re,[["__scopeId","data-v-67868a7d"]]);export{$e as default};
