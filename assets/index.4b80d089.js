import{H as S,z as _e,r as y,A as Q,W as ke,L as he,d as f,K as j,o as d,c as Ve,C as V,D as O,f as e,e as t,w as a,i as W,B as Y,m as r,j as u,l as w,k as T,x as G,s as we}from"./index.4196b790.js";function Ce(c){return S({url:"/demo/demo/list",method:"get",params:c})}function De(c){return S({url:"/demo/demo/page",method:"get",params:c})}function Ue(c){return S({url:"/demo/demo/"+c,method:"get"})}function Te(c){return S({url:"/demo/demo",method:"post",data:c})}function xe(c){return S({url:"/demo/demo",method:"put",data:c})}function Se(c){return S({url:"/demo/demo/"+c,method:"delete"})}const Ke={class:"app-container"},Ne={class:"dialog-footer"},Re=T("i",{class:"el-icon-upload"},null,-1),Ie=T("div",{class:"el-upload__text"},[r("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),T("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1),$e={slot:"footer",class:"dialog-footer"},Be=_e({name:"Demo"}),Pe=Object.assign(Be,{setup(c){const{proxy:m}=we(),B=y([]),D=y(!1),N=y(!1),_=y(!0),R=y(!0),J=y([]),L=y(!0),q=y(!0),I=y(0),F=y(""),x=y([]),v=Q({open:!1,title:"",isUploading:!1,headers:{Authorization:"Bearer "+ke()},url:"/prod-apidemo/demo/importData"}),k=y([{key:0,label:"\u4E3B\u952E",visible:!1},{key:1,label:"\u90E8\u95E8id",visible:!0},{key:2,label:"\u7528\u6237id",visible:!0},{key:3,label:"\u6392\u5E8F\u53F7",visible:!0},{key:4,label:"key\u952E",visible:!0},{key:5,label:"\u503C",visible:!0},{key:6,label:"\u521B\u5EFA\u65F6\u95F4",visible:!0},{key:7,label:"\u521B\u5EFA\u4EBA",visible:!0},{key:8,label:"\u66F4\u65B0\u65F6\u95F4",visible:!0},{key:9,label:"\u66F4\u65B0\u4EBA",visible:!0}]),X=Q({form:{},queryParams:{pageNum:1,pageSize:10,testKey:void 0,value:void 0,createTime:void 0},rules:{testKey:[{required:!0,message:"key\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),{queryParams:s,form:i,rules:Z}=he(X);function C(){_.value=!0,Ce(m.addDateRange(s.value,x.value,"CreateTime")).then(n=>{B.value=n.rows,I.value=n.total,_.value=!1})}function ee(){_.value=!0,De(m.addDateRange(s.value,x.value,"CreateTime")).then(n=>{B.value=n.rows,I.value=n.total,_.value=!1})}function le(){D.value=!1,P()}function P(){i.value={id:void 0,deptId:void 0,userId:void 0,orderNum:void 0,testKey:void 0,value:void 0,version:void 0,createTime:void 0,createBy:void 0,updateTime:void 0,updateBy:void 0,delFlag:void 0},m.resetForm("demoRef")}function $(){s.value.pageNum=1,C()}function te(){s.value.pageNum=1,C()}function ae(){x.value=[],m.resetForm("queryRef"),$()}function oe(n){J.value=n.map(l=>l.id),L.value=n.length!=1,q.value=!n.length}function ne(){P(),D.value=!0,F.value="\u6DFB\u52A0\u6D4B\u8BD5\u5355\u8868"}function H(n){_.value=!0,P();const l=n.id||l.value;Ue(l).then(b=>{_.value=!1,i.value=b.data,D.value=!0,F.value="\u4FEE\u6539\u6D4B\u8BD5\u5355\u8868"})}function de(){m.$refs.demoRef.validate(n=>{n&&(N.value=!0,i.value.id!=null?xe(i.value).then(l=>{m.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),D.value=!1,C()}).finally(()=>{N.value=!1}):Te(i.value).then(l=>{m.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),D.value=!1,C()}).finally(()=>{N.value=!1}))})}function z(n){const l=n.id||l.value;m.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u6D4B\u8BD5\u5355\u8868\u7F16\u53F7\u4E3A"'+l+'"\u7684\u6570\u636E\u9879?').then(()=>(_.value=!0,Se(l))).then(()=>{_.value=!1,C(),m.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).finally(()=>{_.value=!1})}function ie(){v.title="\u6D4B\u8BD5\u5BFC\u5165",v.open=!0}function ue(){m.download("demo/demo/export",{...s.value},`demo_${new Date().getTime()}.xlsx`)}const re=(n,l,b)=>{v.isUploading=!0},se=(n,l,b)=>{v.open=!1,v.isUploading=!1,m.$refs.uploadRef.clearFiles(),m.$alert(n.msg,"\u5BFC\u5165\u7ED3\u679C",{dangerouslyUseHTMLString:!0}),C()};function pe(){m.$refs.uploadRef.submit()}return C(),ee(),(n,l)=>{const b=f("el-input"),h=f("el-form-item"),M=f("el-date-picker"),p=f("el-button"),E=f("el-form"),K=f("el-col"),me=f("right-toolbar"),fe=f("el-row"),g=f("el-table-column"),ce=f("el-table"),ve=f("pagination"),A=f("el-dialog"),ge=f("el-upload"),U=j("hasPermi"),ye=j("loading");return d(),Ve("div",Ke,[V(t(E,{model:e(s),ref:"queryRef",inline:!0},{default:a(()=>[t(h,{label:"key\u952E",prop:"testKey"},{default:a(()=>[t(b,{modelValue:e(s).testKey,"onUpdate:modelValue":l[0]||(l[0]=o=>e(s).testKey=o),placeholder:"\u8BF7\u8F93\u5165key\u952E",clearable:"",style:{width:"200px"},onKeyup:W($,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(h,{label:"\u503C",prop:"value"},{default:a(()=>[t(b,{modelValue:e(s).value,"onUpdate:modelValue":l[1]||(l[1]=o=>e(s).value=o),placeholder:"\u8BF7\u8F93\u5165\u503C",clearable:"",style:{width:"200px"},onKeyup:W($,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(h,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:a(()=>[t(M,{modelValue:e(x),"onUpdate:modelValue":l[2]||(l[2]=o=>Y(x)?x.value=o:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),t(h,null,{default:a(()=>[t(p,{type:"primary",icon:"search",onClick:$},{default:a(()=>[r("\u641C\u7D22")]),_:1}),t(p,{type:"primary",icon:"search",onClick:te},{default:a(()=>[r("\u641C\u7D22(\u81EA\u5B9A\u4E49\u5206\u9875\u63A5\u53E3)")]),_:1}),t(p,{icon:"Refresh",onClick:ae},{default:a(()=>[r("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[O,e(R)]]),t(fe,{gutter:10,class:"mb8"},{default:a(()=>[t(K,{span:1.5},{default:a(()=>[V((d(),u(p,{type:"primary",plain:"",icon:"Plus",onClick:ne},{default:a(()=>[r("\u65B0\u589E")]),_:1})),[[U,["demo:demo:add"]]])]),_:1},8,["span"]),t(K,{span:1.5},{default:a(()=>[V((d(),u(p,{type:"success",plain:"",icon:"Edit",disabled:e(L),onClick:H},{default:a(()=>[r("\u4FEE\u6539")]),_:1},8,["disabled"])),[[U,["demo:demo:edit"]]])]),_:1},8,["span"]),t(K,{span:1.5},{default:a(()=>[V((d(),u(p,{type:"danger",plain:"",icon:"Delete",disabled:e(q),onClick:z},{default:a(()=>[r("\u5220\u9664")]),_:1},8,["disabled"])),[[U,["demo:demo:remove"]]])]),_:1},8,["span"]),t(K,{span:1.5},{default:a(()=>[V((d(),u(p,{type:"info",plain:"",icon:"Upload",onClick:ie},{default:a(()=>[r("\u5BFC\u5165(\u6821\u9A8C)")]),_:1})),[[U,["demo:demo:import"]]])]),_:1},8,["span"]),t(K,{span:1.5},{default:a(()=>[V((d(),u(p,{type:"warning",plain:"",icon:"Download",onClick:ue},{default:a(()=>[r("\u5BFC\u51FA")]),_:1})),[[U,["demo:demo:export"]]])]),_:1},8,["span"]),t(me,{showSearch:e(R),"onUpdate:showSearch":l[3]||(l[3]=o=>Y(R)?R.value=o:null),onQueryTable:C},null,8,["showSearch"])]),_:1}),V((d(),u(ce,{data:e(B),onSelectionChange:oe},{default:a(()=>[t(g,{type:"selection",width:"55",align:"center"}),e(k)[0].visible?(d(),u(g,{key:0,label:"\u4E3B\u952E",align:"center",prop:"id"})):w("",!0),e(k)[1].visible?(d(),u(g,{key:1,label:"\u90E8\u95E8id",align:"center",prop:"deptId"})):w("",!0),e(k)[2].visible?(d(),u(g,{key:2,label:"\u7528\u6237id",align:"center",prop:"userId"})):w("",!0),e(k)[3].visible?(d(),u(g,{key:3,label:"\u6392\u5E8F\u53F7",align:"center",prop:"orderNum"})):w("",!0),e(k)[4].visible?(d(),u(g,{key:4,label:"key\u952E",align:"center",prop:"testKey"})):w("",!0),e(k)[5].visible?(d(),u(g,{key:5,label:"\u503C",align:"center",prop:"value"})):w("",!0),e(k)[6].visible?(d(),u(g,{key:6,label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:a(o=>[T("span",null,G(n.parseTime(o.row.createTime,"{y}-{m}-{d}")),1)]),_:1})):w("",!0),e(k)[7].visible?(d(),u(g,{key:7,label:"\u521B\u5EFA\u4EBA",align:"center",prop:"createBy"})):w("",!0),e(k)[8].visible?(d(),u(g,{key:8,label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",width:"180"},{default:a(o=>[T("span",null,G(n.parseTime(o.row.updateTime,"{y}-{m}-{d}")),1)]),_:1})):w("",!0),e(k)[9].visible?(d(),u(g,{key:9,label:"\u66F4\u65B0\u4EBA",align:"center",prop:"updateBy"})):w("",!0),t(g,{label:"\u64CD\u4F5C",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:a(o=>[V((d(),u(p,{link:"",type:"primary",icon:"Edit",onClick:be=>H(o.row)},{default:a(()=>[r("\u4FEE\u6539")]),_:2},1032,["onClick"])),[[U,["demo:demo:edit"]]]),V((d(),u(p,{link:"",type:"primary",icon:"Delete",onClick:be=>z(o.row)},{default:a(()=>[r("\u5220\u9664")]),_:2},1032,["onClick"])),[[U,["demo:demo:remove"]]])]),_:1})]),_:1},8,["data"])),[[ye,e(_)]]),V(t(ve,{total:e(I),page:e(s).pageNum,"onUpdate:page":l[4]||(l[4]=o=>e(s).pageNum=o),limit:e(s).pageSize,"onUpdate:limit":l[5]||(l[5]=o=>e(s).pageSize=o),onPagination:C},null,8,["total","page","limit"]),[[O,e(I)>0]]),t(A,{title:e(F),modelValue:e(D),"onUpdate:modelValue":l[12]||(l[12]=o=>Y(D)?D.value=o:null),width:"500px","append-to-body":""},{footer:a(()=>[T("div",Ne,[t(p,{loading:e(N),type:"primary",onClick:de},{default:a(()=>[r("\u786E \u5B9A")]),_:1},8,["loading"]),t(p,{onClick:le},{default:a(()=>[r("\u53D6 \u6D88")]),_:1})])]),default:a(()=>[t(E,{ref:"demoRef",model:e(i),rules:e(Z),"label-width":"80px"},{default:a(()=>[t(h,{label:"\u90E8\u95E8id",prop:"deptId"},{default:a(()=>[t(b,{modelValue:e(i).deptId,"onUpdate:modelValue":l[6]||(l[6]=o=>e(i).deptId=o),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8id"},null,8,["modelValue"])]),_:1}),t(h,{label:"\u7528\u6237id",prop:"userId"},{default:a(()=>[t(b,{modelValue:e(i).userId,"onUpdate:modelValue":l[7]||(l[7]=o=>e(i).userId=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237id"},null,8,["modelValue"])]),_:1}),t(h,{label:"\u6392\u5E8F\u53F7",prop:"orderNum"},{default:a(()=>[t(b,{modelValue:e(i).orderNum,"onUpdate:modelValue":l[8]||(l[8]=o=>e(i).orderNum=o),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),t(h,{label:"key\u952E",prop:"testKey"},{default:a(()=>[t(b,{modelValue:e(i).testKey,"onUpdate:modelValue":l[9]||(l[9]=o=>e(i).testKey=o),placeholder:"\u8BF7\u8F93\u5165key\u952E"},null,8,["modelValue"])]),_:1}),t(h,{label:"\u503C",prop:"value"},{default:a(()=>[t(b,{modelValue:e(i).value,"onUpdate:modelValue":l[10]||(l[10]=o=>e(i).value=o),placeholder:"\u8BF7\u8F93\u5165\u503C"},null,8,["modelValue"])]),_:1}),t(h,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:a(()=>[t(M,{clearable:"",modelValue:e(i).createTime,"onUpdate:modelValue":l[11]||(l[11]=o=>e(i).createTime=o),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"\u9009\u62E9\u521B\u5EFA\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(A,{title:e(v).title,visible:e(v).open,width:"400px","append-to-body":""},{default:a(()=>[t(ge,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:e(v).headers,action:e(v).url+"?updateSupport="+e(v).updateSupport,disabled:e(v).isUploading,"on-progress":re,"on-success":se,"auto-upload":!1,drag:""},{default:a(()=>[Re,Ie]),_:1},8,["headers","action","disabled"]),T("div",$e,[t(p,{type:"primary",onClick:pe},{default:a(()=>[r("\u786E \u5B9A")]),_:1}),t(p,{onClick:l[13]||(l[13]=o=>e(v).open=!1)},{default:a(()=>[r("\u53D6 \u6D88")]),_:1})])]),_:1},8,["title","visible"])])}}});export{Pe as default};
